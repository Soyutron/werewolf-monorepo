# Chatwork グループ一斉送信システム - 画面設計ドキュメント

## 概要

Chatwork への一斉送信機能を管理するための 6 つの主要画面の仕様書です。

---

## ① グループ一覧画面（Group List Page）

### 機能

- 登録済みグループの一覧表示
- グループ名、所属ルーム数、作成日時を表示
- 「新規作成」「編集」「削除」「一斉送信」「ログ確認」ボタン

### 画面構成

| 要素         | 説明                                         |
| :----------- | :------------------------------------------- |
| グループ名   | クリックで詳細表示も可能                     |
| 所属ルーム数 | グループ内のルーム数                         |
| 作成日時     | グループ作成日時                             |
| アクション   | 新規作成 / 編集 / 削除 / 一斉送信 / ログ確認 |

### 位置づけ

- **管理の中心となる画面**
- ここから以下へ遷移：
  - 「新規作成」 → グループ作成画面
  - 「編集」 → グループ編集画面
  - 「一斉送信」 → 一斉送信画面
  - 「ログ確認」 → ログ確認画面

---

## ② グループ作成画面（Group Create Page）

### 機能

- グループ名入力
- Chatwork ルーム一覧から複数選択（チェックボックス or マルチセレクト）
- 「作成」ボタン

### 画面構成

```
┌─────────────────────────────────────┐
│ グループ作成                         │
├─────────────────────────────────────┤
│ グループ名: [入力欄]                 │
│                                     │
│ ルーム選択:                         │
│ ☐ ルーム A                          │
│ ☐ ルーム B                          │
│ ☐ ルーム C                          │
│ ...                                 │
│                                     │
│ [キャンセル] [作成]                  │
└─────────────────────────────────────┘
```

### 位置づけ

- **ユーザーの最初の操作対象**
- グループと送信先（ルーム）をまとめて設定
- 検証：グループ名の必須チェック、ルーム選択の必須チェック

---

## ③ グループ編集画面（Group Edit Page）

### 機能

- 既存グループ名の編集
- ルームの追加・削除
- 保存ボタン

### 画面構成

```
┌─────────────────────────────────────┐
│ グループ編集: [グループ名]           │
├─────────────────────────────────────┤
│ グループ名: [入力欄（現在値入力済）] │
│                                     │
│ 所属ルーム:                         │
│ ☑ ルーム A      [削除]              │
│ ☑ ルーム B      [削除]              │
│ ☐ ルーム C      [追加]              │
│ ☐ ルーム D      [追加]              │
│                                     │
│ [キャンセル] [保存]                  │
└─────────────────────────────────────┘
```

### 位置づけ

- **企業内でルーム構成が変わることに対応**
- グループ編集は頻繁に発生する操作
- 削除機能で不要なルームを外す

---

## ④ 一斉送信画面（Broadcast Send Page）

### 機能

- 対象グループ名、ルーム一覧を表示
- 送信内容の入力欄（textarea）
- 添付ファイル（必要なら後で拡張）
- 「確認画面へ」ボタン

### 画面構成

```
┌─────────────────────────────────────┐
│ 一斉送信: [グループ名]               │
├─────────────────────────────────────┤
│ 対象ルーム:                         │
│ • ルーム A                          │
│ • ルーム B                          │
│ • ルーム C                          │
│                                     │
│ 送信内容:                           │
│ ┌───────────────────────────────┐   │
│ │                               │   │
│ │ [送信内容を入力してください]    │   │
│ │                               │   │
│ └───────────────────────────────┘   │
│                                     │
│ 添付ファイル: [ファイル選択]         │
│                                     │
│ [キャンセル] [確認画面へ]            │
└─────────────────────────────────────┘
```

### 位置づけ

- **送信内容の作成段階**
- 直接送信は危険のため、確認画面でワンクッション
- 誤送信防止のための設計

---

## ⑤ 一斉送信確認画面（Broadcast Confirm Page）

### 機能

- 送信内容表示
- 対象ルーム一覧表示
- 「送信する」ボタン
- 「戻る」ボタン

### 画面構成

```
┌─────────────────────────────────────┐
│ 送信内容の確認                       │
├─────────────────────────────────────┤
│ 対象グループ: [グループ名]           │
│                                     │
│ 対象ルーム:                         │
│ • ルーム A                          │
│ • ルーム B                          │
│ • ルーム C                          │
│                                     │
│ 送信内容:                           │
│ ┌───────────────────────────────┐   │
│ │ [送信内容（読み取り専用）]      │   │
│ │                               │   │
│ └───────────────────────────────┘   │
│                                     │
│ [戻る] [送信する]                    │
└─────────────────────────────────────┘
```

### 位置づけ

- **誤送信防止の最後の確認画面**
- MVP ではスキップも可能だが、本番運用では必須
- 実行前の最終チェックポイント

---

## ⑥ ログ一覧画面（Logs List Page）

### 機能

- 過去の送信ログを一覧で表示
- 送信日時、送信者、グループ名、送信結果（成功 or 失敗）を表示
- 詳細へのリンク

### 画面構成

| 送信日時         | 送信者 | グループ名 | 送信結果 | アクション |
| :--------------- | :----- | :--------- | :------- | :--------- |
| 2025-12-06 10:30 | user_a | グループ A | ✅ 成功  | [詳細]     |
| 2025-12-06 09:15 | user_b | グループ B | ❌ 失敗  | [詳細]     |
| 2025-12-05 14:45 | user_a | グループ C | ✅ 成功  | [詳細]     |

### 詳細画面の内容（例）

```
送信日時: 2025-12-06 10:30
送信者: user_a
グループ名: グループ A
対象ルーム: ルーム A, ルーム B, ルーム C
送信内容: [内容表示]
各ルームの送信結果:
  • ルーム A: ✅ 成功
  • ルーム B: ✅ 成功
  • ルーム C: ❌ 失敗 (エラー内容)
```

### 位置づけ

- **送信履歴の可視化と監査**
- グループ一覧画面からアクセス可能
- トラブルシューティングと送信状況の確認に使用

---

## 画面遷移フロー

```
グループ一覧画面
├─ [作成ボタン] → グループ作成画面
│                    ↓
│              グループ一覧画面
│
├─ [編集ボタン] → グループ編集画面
│                    ↓
│              グループ一覧画面
│
├─ [削除ボタン] → グループ一覧画面
│
├─ [一斉送信ボタン] → 一斉送信画面
│                        ↓
│                  一斉送信確認画面
│                        ↓
│                  送信実行 → ログ一覧画面
│
└─ [ログ確認] → ログ一覧画面
                    ↓
              ログ詳細画面
```

---

## 実装上の注意点

| 項目                   | 説明                                               |
| :--------------------- | :------------------------------------------------- |
| **バリデーション**     | グループ名必須、ルーム選択必須、送信内容必須       |
| **エラーハンドリング** | 送信失敗時の再試行、エラーメッセージ表示           |
| **権限管理**           | 送信者の記録、削除権限の制限（オプション）         |
| **ページング**         | グループ数、ログ数が多い場合はページネーション実装 |
| **検索・フィルタ**     | ログ一覧の日時検索、グループ検索（拡張機能）       |
