# Chatwork 送信くん API 仕様書

## 📡 API 一覧

### 🔹 Rooms（ルーム）

#### `GET /rooms`

**説明**: DB に保存されている全ルームを取得
**注記**: Chatwork API ではなく、純粋に DB の `rooms` テーブルから取得

---

#### `POST /rooms/sync`

**説明**: Chatwork API を叩いて最新のルーム一覧を取得し、`rooms` テーブルを Full Refresh（全入れ替え）する

**処理内容**:

- Chatwork API のルーム一覧取得
- DB に存在しないものは追加
- Chatwork 上で削除されたものは DB から削除
- すべて同期完了後に commit

---

### 🔹 Groups（グループ）

#### `GET /groups`

**説明**: 全グループの一覧を取得

---

#### `GET /groups/{group_id}`

**説明**: 指定したグループの詳細を取得
**戻り値**: `group_rooms` も紐づけて返却

---

#### `POST /groups`

**説明**: グループを新規作成

**リクエスト例**:

```json
{
  "group_name": "営業部グループ",
  "room_ids": [408053693, 410589768]
}
```

---

#### `PUT /groups/{group_id}`

**説明**: グループ名または参加ルームを更新

**リクエスト例**:

```json
{
  "group_name": "新しいグループ名",
  "room_ids": [408053693, 410589768, 412345678]
}
```

---

#### `DELETE /groups/{group_id}`

**説明**: グループを削除
**注記**: 関連する `group_rooms` レコードも合わせて削除する

---

## 🖥️ 画面構成（フロントエンド）

### グループ一覧画面

| 要素           | 機能                   |
| :------------- | :--------------------- |
| グループ名一覧 | 登録済みグループの表示 |
| 新規作成ボタン | 新しいグループを作成   |
| 編集ボタン     | グループの内容を編集   |
| 削除ボタン     | グループを削除         |

---

### グループ編集画面

| 要素           | 機能                   |
| :------------- | :--------------------- |
| グループ名編集 | グループ名の入力・更新 |
| 参加ルーム選択 | 複数選択でルームを指定 |
| 保存ボタン     | 変更を保存             |

---

### Chatwork ルーム同期ボタン

| 要素       | 機能                                                      |
| :--------- | :-------------------------------------------------------- |
| 同期ボタン | `POST /rooms/sync` を実行して最新のルーム情報を DB に反映 |
